<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Project | LEE KYUNTAE</title>

  <!-- 사용자가 제공한 CSS 그대로 사용 -->
  <link rel="stylesheet" href="./style.css" />
</head>

<body class="page">
  <div class="page-shell">
    <header>
      <nav class="top-nav" aria-label="Primary">
        <div class="nav-left">
          <a href="resume.html">RESUME</a>
          <a href="info.html">INFO</a>
        </div>

        <h1 class="site-title">
          <a class="brand" href="index.html" aria-label="Go to home">
            <img src="assets/site-title-scaled.png" alt="LEE KYUNTAE" />
          </a>
        </h1>

        <div class="nav-right">
          <a href="project.html" aria-current="page">PROJECT</a>
        </div>
      </nav>

      <p class="subtitle">LEE KYUNTAE DESIGN STUDIO</p>
    </header>

    <main class="page-content">
      <span class="section-title">Project</span>
      <p class="project-hint">
        프로젝트를 클릭하면 아래로 펼쳐집니다. 이미지가 여러 장이면 좌/우 버튼으로 넘길 수 있습니다.
      </p>

      <div class="project-list project-list--accordion" id="projectList" aria-label="Project list">
        <!-- JS 렌더 -->
      </div>
    </main>

    <footer class="page-footer">
      © 2025 LEE KYUNTAE. All Rights Reserved.<br />
      주소 : 의정부시 범골로29번길 34 \ 연락처 : 010-8758-2710 \ Contact : rbsxo0710@gmail.com
    </footer>
  </div>

  <script>
    /* =========================================================
       EDIT HERE ONLY
       - 각 프로젝트의 images 배열에 원하는 만큼 이미지 경로를 넣으시면 됩니다.
       - 지금은 이미지가 없어도 보이도록 placeholder를 넣어둔 상태입니다.
       ========================================================= */

    function svgPlaceholder(label) {
      const svg =
        "<svg xmlns='http://www.w3.org/2000/svg' width='1400' height='900'>" +
          "<defs>" +
            "<linearGradient id='g' x1='0' x2='1' y1='0' y2='1'>" +
              "<stop offset='0' stop-color='#f4f4f5'/>" +
              "<stop offset='1' stop-color='#d6d6d6'/>" +
            "</linearGradient>" +
          "</defs>" +
          "<rect width='1400' height='900' fill='url(#g)'/>" +
          "<text x='50%' y='50%' dominant-baseline='middle' text-anchor='middle' " +
                "font-family='Montserrat, Arial' font-size='44' fill='#666'>" +
            label +
          "</text>" +
        "</svg>";
      return "data:image/svg+xml;utf8," + encodeURIComponent(svg);
    }

    const PROJECTS = [
      {
        id: "p01",
        no: "01",
        title: "Side Table No.01",
        year: "2024",
        category: "Table",
        images: [
          "./assets/1/1.webp",
          "./assets/1/2.jpeg",
          "./assets/1/3.jpeg",
          "./assets/1/4.webp",
          "./assets/1/5.jpeg",
          "./assets/1/6.webp",
        ],
        summary:
          "해당 가구는 우리 일상 속 많은 비율을 차지하는 서양식 가구의 한국적 재해석을 목표로 한다. 작가는 해당 가구를 통해, 건축과 가구에 존재하는 ‘수직구조물’에 대한 고찰을 심도있게 풀어낸다. 가구에서 수직구조물은 동서양을 막론하고 필수적으로 존재한다. 한국 고유의 수직구조물인 ‘장승’을 서양식 가구의 근간이 되는 미드센추리 모던 스타일에 접목시킴으로써 두 문화의 어우러짐을 꾀한다.",
        meta: {
          tools: "Ginkgo, walnut, steel, cupronickel",
          duration: "2024",
          size: "40 x 28 x 53(h) cm"
        },
        highlights: [
          "상판 하중과 흔들림을 줄이기 위한 다리 각도/두께 반복 테스트",
          "표면 마감에서 반사율·촉감 균형을 위한 샌딩 단계 세분화",
          "분해/이동을 고려한 결합부 구조 검토"
        ],
      },

      {
        id: "p02",
        no: "02",
        title: "Villustool",
        year: "2024",
        category: "Stool",
        images: [
          "./assets/2/1.webp",
          "./assets/2/2.webp",
          "./assets/2/3.jpeg",
          "./assets/2/4.jpeg",
          "./assets/2/5.webp",
          "./assets/2/6.jpeg",
        ],
        summary:
          "인간 내면의 감정 변화를 몸 내부 장기의 움직임으로 치환하여 표현한 연작 시리즈 중 하나. 소화 기관 중 대장과 소장을 가구로 재해석하였다. 융털을 Fur 소재로 해석한 것이 특징이다.",
        meta: {
          tools: "Stone, fabric",
          duration: "2024",
          size: "55 x 34 x 42 (cm)"
        },
        highlights: [
          "단순한 실루엣 안에서 비례로 캐릭터 부여",
          "다리 각도/두께를 조정해 안정감 확보",
          "표면 마감에 따른 촉감/반사율 튜닝"
        ],
      },

      {
        id: "p03",
        no: "03",
        title: "Bronchair",
        year: "2024",
        category: "Chair",
        images: [
          "./assets/3/1.jpeg",
          "./assets/3/2.webp",
          "./assets/3/3.jpeg",
          "./assets/3/4.jpeg",
          "./assets/3/5.jpeg",
          "./assets/3/6.jpeg",
        ],
        summary:
          "인간 내면의 감정 변화를 몸 내부 장기의 움직임으로 치환하여 표현한 연작 시리즈 중 하나. 호흡 기관 중 폐와 폐포를 가구로 재해석하였다. 시팅부와 등받이에 공기를 채워넣은 것이 특징.",
        meta: {
          tools: "Steel, PE, PET",
          duration: "2024.10 – 2024.12",
          size: "60 x 59 x 79.5 (cm)"
        },
      },

      {
        id: "p04",
        no: "04",
        title: "Heartable",
        year: "2024",
        category: "Chair",
        images: [
          "./assets/4/1.webp",
          "./assets/4/2.webp",
          "./assets/4/3.webp",
          "./assets/4/4.webp",
          "./assets/4/5.jpeg",
          "./assets/4/6.jpeg",
        ],
        summary:
          "인간 내면의 감정 변화를 몸 내부 장기의 움직임으로 치환하여\n표현한 연작 시리즈 중 하나. 순환 기관 중 심장을 가구로 재해석\n하였다. 심장을 손에 쥐고 있는 모양의 테이블 다리가 특징.",
        meta: {
          tools: "Acrylic, plaster",
          duration: "2024",
          size: "60 x 40 x 30 (cm)"
        }
      },

      {
        id: "p05",
        no: "05",
        title: "아더에러 스토어 디자인 제안 'EARTHPACE'",
        year: "2023",
        category: "Design",
        images: [
          "./assets/5/1.jpeg",
          "./assets/5/2.jpeg",
          "./assets/5/3.jpeg",
          "./assets/5/4.webp",
          "./assets/5/5.jpeg",
          "./assets/5/6.jpeg",
        ],
        summary:
          "‘인간의 다양한 내면과 유사한 모습의 장소는 어디일까’라는 물음에서 출발한 결과, 깊이에 따라 다양한 모습을 보이는 바다를 떠올리게 되었다. 바다를 구현하기에 적합한 브랜드를 찾게 되었고, ‘아더에러’가 소재와 공간의 ‘낯섦’에 주목하는 브랜드이기에 미지의 공간을 풀어내는 것에 있어서 이질감이 들지 않을 것으로 판단했다.",
        meta: {
          tools: "",
          duration: "2023",
          size: "",
        }
      },

      {
        id: "p06",
        no: "06",
        title: "LABBCCIN 스토어 디자인 제안",
        year: "2025",
        category: "Design",
        images: [
          "./assets/6/1.jpeg",
          "./assets/6/2.jpeg",
          "./assets/6/3.jpeg",
          "./assets/6/4.jpeg",
          "./assets/6/5.jpeg",
          "./assets/6/6.jpeg",
        ],
        summary:
          "품질은 우수하나 인지도가 낮은 위생 브랜드 '랩신'을 위해 제안한 오프라인 공간 브랜딩 프로젝트이다. 맛집이 많은 용리단길에 위치하여, 방문객이 식사 전후 자연스럽게 손을 씻으며 제품을 체험하도록 설계된 도심 속 위생 거점이다. 시각과 청각을 자극하는 실험적이고 감각적인 공간 연출로 브랜드 경험을 극대화했다. 이를 통해 위생 관리를 즐거운 문화이자 'New Manners'로 정착시키고, 랩신의 브랜드 인지도를 획기적으로 높이는 것을 목표로 한다.",
        meta: {
          tools: "",
          duration: "2025",
          size: "",
        }
      }
    ];

    /* =========================================================
       RENDER
       ========================================================= */

    const listEl = document.getElementById("projectList");

    function escapeHtml(s) {
      return String(s)
        .replaceAll("&", "&amp;")
        .replaceAll("<", "&lt;")
        .replaceAll(">", "&gt;")
        .replaceAll('"', "&quot;")
        .replaceAll("'", "&#039;");
    }

    function render() {
      listEl.innerHTML = PROJECTS.map((p) => {
        const links = (p.links || []).map(l =>
          `<a href="${escapeHtml(l.href)}" target="_blank" rel="noopener noreferrer">${escapeHtml(l.label)}</a>`
        ).join(" / ");

        return `
          <section class="project-entry" data-project-id="${escapeHtml(p.id)}">
            <button type="button" class="project-item" aria-expanded="false" aria-controls="detail-${escapeHtml(p.id)}">
              <span class="p-id">${escapeHtml(p.no)}</span>
              <span class="p-title">${escapeHtml(p.title)}</span>
              <span class="p-year">${escapeHtml(p.year)}</span>
              <span class="p-cat">${escapeHtml(p.category)}</span>
              <span class="p-toggle" aria-hidden="true"></span>
            </button>

            <div class="project-detail" id="detail-${escapeHtml(p.id)}" hidden>
              <div class="project-detail-inner">

                <div class="project-gallery" data-gallery style="position:relative;">
                  <img data-gallery-img src="" alt="" />

                  <button type="button" data-gallery-prev
                    aria-label="Previous image"
                    style="
                      position:absolute; left:12px; top:50%; transform:translateY(-50%);
                      width:40px; height:40px; border-radius:999px; border:1px solid rgba(0,0,0,0.15);
                      background:rgba(255,255,255,0.9); cursor:pointer; display:grid; place-items:center;
                      font-size:18px; line-height:1; opacity:0.9;
                    ">‹</button>

                  <button type="button" data-gallery-next
                    aria-label="Next image"
                    style="
                      position:absolute; right:12px; top:50%; transform:translateY(-50%);
                      width:40px; height:40px; border-radius:999px; border:1px solid rgba(0,0,0,0.15);
                      background:rgba(255,255,255,0.9); cursor:pointer; display:grid; place-items:center;
                      font-size:18px; line-height:1; opacity:0.9;
                    ">›</button>

                  <div data-gallery-dots
                    aria-label="Image pagination"
                    style="
                      position:absolute; left:0; right:0; bottom:10px;
                      display:flex; justify-content:center; gap:8px;
                      padding:0 10px;
                    "></div>
                </div>

                <div>
                  <p class="project-summary">${escapeHtml(p.summary || "")}</p>

                  <div class="project-detail-grid">

                    <div class="project-block">
                      <h3>Information</h3>
                      <dl class="project-meta">
                        <div class="dl-row"><dt>Tools</dt><dd>${escapeHtml(p.meta?.tools || "")}</dd></div>
                        <div class="dl-row"><dt>Duration</dt><dd>${escapeHtml(p.meta?.duration || "")}</dd></div>
                        <div class="dl-row"><dt>Size</dt><dd>${escapeHtml(p.meta?.size || "")}</dd></div>
                      </dl>

                      ${links ? `<p class="project-note"><strong>Links</strong>: ${links}</p>` : ""}
                    </div>

                  </div>
                </div>

              </div>
            </div>
          </section>
        `;
      }).join("");

      bindAccordion();
    }

    /* =========================================================
       ACCORDION (inline expand below)
       ========================================================= */

    function setExpanded(entryEl, expanded) {
      const btn = entryEl.querySelector(".project-item");
      const detail = entryEl.querySelector(".project-detail");
      const inner = entryEl.querySelector(".project-detail-inner");

      btn.setAttribute("aria-expanded", expanded ? "true" : "false");

      if (expanded) {
        entryEl.classList.add("is-open");
        detail.hidden = false;
        requestAnimationFrame(() => {
          detail.style.maxHeight = inner.scrollHeight + "px";
        });
      } else {
        entryEl.classList.remove("is-open");
        detail.style.maxHeight = inner.scrollHeight + "px";
        requestAnimationFrame(() => {
          detail.style.maxHeight = "0px";
        });
        const onEnd = () => {
          detail.hidden = true;
          detail.removeEventListener("transitionend", onEnd);
        };
        detail.addEventListener("transitionend", onEnd);
      }
    }

    function closeOthers(exceptId) {
      document.querySelectorAll(".project-entry").forEach(entry => {
        const id = entry.getAttribute("data-project-id");
        if (id === exceptId) return;
        const btn = entry.querySelector(".project-item");
        if (btn.getAttribute("aria-expanded") === "true") {
          setExpanded(entry, false);
        }
      });
    }

    function openByHash() {
      const id = (location.hash || "").replace("#", "");
      if (!id) return;

      const entry = document.querySelector(`.project-entry[data-project-id="${CSS.escape(id)}"]`);
      if (!entry) return;

      closeOthers(id);
      setExpanded(entry, true);

      const btn = entry.querySelector(".project-item");
      btn.scrollIntoView({ behavior: "smooth", block: "start" });
    }

    /* =========================================================
       GALLERY (prev/next + dots)
       ========================================================= */

    const galleryState = new Map(); // projectId -> { index }

    function initGallery(entryEl, project) {
      const img = entryEl.querySelector("[data-gallery-img]");
      const prev = entryEl.querySelector("[data-gallery-prev]");
      const next = entryEl.querySelector("[data-gallery-next]");
      const dots = entryEl.querySelector("[data-gallery-dots]");

      const projectId = project.id;
      const images = (project.images || []).slice();
      const count = images.length || 1;

      galleryState.set(projectId, { index: 0 });

      function renderGallery() {
        const st = galleryState.get(projectId);
        const idx = st.index;

        const src = images[idx] || svgPlaceholder(project.title + " — 01");
        img.src = src;
        img.alt = `${project.title} image ${idx + 1} of ${count}`;

        const multi = count > 1;
        prev.disabled = !multi;
        next.disabled = !multi;

        dots.innerHTML = "";
        if (multi) {
          for (let i = 0; i < count; i++) {
            const b = document.createElement("button");
            b.type = "button";
            b.setAttribute("aria-label", `Go to image ${i + 1}`);
            b.setAttribute("aria-current", i === idx ? "true" : "false");
            b.style.width = "7px";
            b.style.height = "7px";
            b.style.borderRadius = "999px";
            b.style.border = "1px solid rgba(255,255,255,0.6)";
            b.style.background = i === idx ? "rgba(0,0,0,0.55)" : "rgba(0,0,0,0.18)";
            b.style.cursor = "pointer";
            b.addEventListener("click", (e) => {
              e.stopPropagation();
              st.index = i;
              renderGallery();
              refreshEntryHeight(entryEl);
            });
            dots.appendChild(b);
          }
        }

        img.onload = () => refreshEntryHeight(entryEl);
      }

      function goPrev() {
        const st = galleryState.get(projectId);
        if (count <= 1) return;
        st.index = (st.index - 1 + count) % count;
        renderGallery();
      }

      function goNext() {
        const st = galleryState.get(projectId);
        if (count <= 1) return;
        st.index = (st.index + 1) % count;
        renderGallery();
      }

      prev.addEventListener("click", (e) => { e.stopPropagation(); goPrev(); });
      next.addEventListener("click", (e) => { e.stopPropagation(); goNext(); });

      renderGallery();
    }

    function refreshEntryHeight(entryEl) {
      const btn = entryEl.querySelector(".project-item");
      if (btn.getAttribute("aria-expanded") !== "true") return;
      const detail = entryEl.querySelector(".project-detail");
      const inner = entryEl.querySelector(".project-detail-inner");
      detail.style.maxHeight = inner.scrollHeight + "px";
    }

    function bindAccordion() {
      // 갤러리 초기화
      document.querySelectorAll(".project-entry").forEach(entry => {
        const projectId = entry.getAttribute("data-project-id");
        const project = PROJECTS.find(p => p.id === projectId);
        if (project) initGallery(entry, project);
      });

      // 아코디언 토글
      listEl.addEventListener("click", (e) => {
        const btn = e.target.closest(".project-item");
        if (!btn) return;

        const entry = btn.closest(".project-entry");
        const id = entry.getAttribute("data-project-id");
        const isOpen = btn.getAttribute("aria-expanded") === "true";

        if (isOpen) {
          setExpanded(entry, false);
          history.replaceState(null, "", location.pathname);
          return;
        }

        closeOthers(id);
        setExpanded(entry, true);
        history.replaceState(null, "", `#${id}`);
      });

      window.addEventListener("resize", () => {
        document.querySelectorAll(".project-entry").forEach(refreshEntryHeight);
      });
    }

    // init
    render();
    openByHash();
    window.addEventListener("hashchange", openByHash);
  </script>
</body>
</html>
